<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Comfortaa:wght@300..700&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

  

  <title>F1 Plots</title>
  <link rel="stylesheet" href="../template/fallingSandStyle.css">
  <link rel="stylesheet" href="../template/buttonStyle.css">
  <link rel="stylesheet" href="../template/inputStyle.css">

  
</head>

<body>
  <h1 class="titolo">F1 Plots</h1>
  <p>Here you can see two plots related to the F1 World Championship.</p>
    <p>
    The first one shows the distribution of points per driver throughout the ongoing F1 season.
    </p>
    <p>
    The second one shows the progression of the championship standings, race by race, with race on the x axis and points on the y axis.
    </p>
    <p>
    Each line represents a driver, with colors corresponding to the team they last raced for.
    </p>
    <p>
    (Note:  if the plots do not appear, just reload until they do, I'm not a professional web developer and in order to have the graphs be up to date they are created on the spot, sometimes the connection can be iffy and they are not loaded correctly)
    
  </p>

  <div>
      <label for="yearSelectorLabel">Select Year:</label>
        <select id="yearSelector" onchange="updatePlots()">
      </select>
  </div>



  
    <div class="plot-container">
      <img src="https://monca.tail6bbac.ts.net/plot1.png" id="plot1" alt="Points per Driver Plot" class="plot-image">
    </div>
    <div class="plot-container">
      <img src="https://monca.tail6bbac.ts.net/plot2.png" id="plot2" alt="Points History Plot" class="plot-image">
    </div>




  <footer class="footer">
    This website is unofficial and is not associated in any way with the Formula 1 companies. F1, FORMULA ONE, FORMULA 1, FIA FORMULA ONE WORLD CHAMPIONSHIP, GRAND PRIX and related marks are trade marks of Formula One Licensing B.V.
  </footer>









<script>
        // Populate year selector
        function populateYearSelector() {
            selector = document.getElementById('yearSelector');
            const currentYear = new Date().getFullYear();
            
            // Add years from current year back to whenever your data starts
            for (let year = currentYear; year >= 2020; year--) {
                option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                if (year === currentYear) {
                    option.selected = true;
                }
                selector.appendChild(option);
            }
        }
        
        // Update plots when year changes
        function updatePlots() {
            const selectedYear = document.getElementById('yearSelector').value;
            const plot1 = document.getElementById('plot1');
            const plot2 = document.getElementById('plot2');
            
            // Add timestamp to prevent caching issues
            const timestamp = new Date().getTime();

            plot1.src = `http://127.0.0.1:5000/plot1.png?year=${selectedYear}&t=${timestamp}`;
            plot2.src = `http://127.0.0.1:5000/plot2.png?year=${selectedYear}&t=${timestamp}`;
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            populateYearSelector();
        });

        
    </script>
</body>
</html>
